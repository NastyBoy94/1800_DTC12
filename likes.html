<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="likes.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"
    />
    <title>SmartShopper - Likes</title>

    <!-- Firebase CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
      crossorigin="anonymous"
    ></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>

    <script src="/scripts/firebaseAPI.js"></script>
  </head>
  <body>
    <nav role="navigation" class="navbar">
      <div id="menuToggle">
        <!--
     hidden checkbox is used as click reciever,
      so you can use the :checked selector on it.
      -->
        <input type="checkbox" />

        <!--
     spans to act as a hamburger.
      -->
        <span></span>
        <span></span>
        <span></span>

        <ul id="menu">
          <a href="#"><li>Home</li></a>
          <a href="#"><li>Setting</li></a>
          <a href="#"><li>Account</li></a>
          <a href="#"><li>Option2</li></a>
        </ul>
      </div>
      <link
        href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
        rel="stylesheet"
      />

      <div class="wrapper">
        <br />
        <div class="label">SmartShopper</div>
        <div class="searchBar">
          <input
            id="searchQueryInput"
            type="text"
            name="searchQueryInput"
            placeholder="Search"
            value=""
          />
          <button id="searchQuerySubmit" type="submit" name="searchQuerySubmit">
            <svg style="width: 24px; height: 24px" viewbox="0 0 24 24">
              <path
                fill="#666666"
                d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"
              />
            </svg>
          </button>
          <i class="fa fa-heart fa_custom"></i>
        </div>
      </div>

      <!-- <div class="topnav"></div>
      <div class="search-container">
        <form action="/action_page.php">
          <input type="text" placeholder="Search.." name="search">
          <button type="submit"><i class="fa fa-search"></i></button>
        </form>
      </div> -->
    </nav>
    <div class="paragraph">
      <p>Products I like</p>
    </div>
    <template id="hikeCardTemplate">
      <div class="card">
        <img class="card-img-top" />
        <div class="card-body">
          <h5 class="card-title">placeholder</h5>
          <p class="card-length">placeholder</p>
          <a href="review.html" class="link-primary">Write a review</a>
          <br />
          <p class="card-text">
            This card has supporting text below as a natural lead-in to
            additional content.
          </p>
          <a href="#" class="btn btn-primary" style="float: right">Read more</a>
        </div>
      </div>
    </template>
    <div class="container">
      <div class="card-group" id="hikeCardGroup"></div>
    </div>

    <script>
      function writeLikes() {
        //define a variable for the collection you want to create in Firestore to populate data
        var likesRef = db.collection("Likes");

        likesRef.add({
          code: "hydro_flask",
          name: "Standard Mouth Bottle with Standard Flex Cap - 21 Oz",
          seller: "Altitude Sport",
          company: "Hydroflask",
          price: "CAD 39.95",
        });
        likesRef.add({
          code: "Nalgene-Retro",
          name: "32oz Wide Mouth Tritan - Retro Clementine",
          seller: "Naglene",
          company: "Naglene",
          price: "CAD 20.75",
        });
        likesRef.add({
          code: "Yellow_water_bottle",
          name: "Day Hydration Tracking Water Bottle",
          seller: "Nordstrom",
          company: "Blink",
          price: "CAD 50.00",
        });
      }

      function displayHikes() {
        let hikeCardTemplate = document.getElementById("hikeCardTemplate");
        let hikeCardGroup = document.getElementById("hikeCardGroup");

        db.collection("Likes")
          .get()
          .then((allHikes) => {
            allHikes.forEach((doc) => {
              var likeName = doc.data().name; //gets the name field
              var likeID = doc.data().code; //gets the unique ID field
              var likePrice = doc.data().price; //gets the length field

              let testHikeCard = hikeCardTemplate.content.cloneNode(true);
              testHikeCard.querySelector(".card-title").innerHTML = likeName;
              testHikeCard.querySelector(".card-length").innerHTML = likePrice;
              testHikeCard.querySelector("a").onclick = () =>
                setHikeData(likeID);
              testHikeCard.querySelector("img").src = `./images/${likeID}.jpg`;
              hikeCardGroup.appendChild(testHikeCard);
            });
          });
      }
      displayHikes();
    </script>
  </body>
</html>
